# Play with  kafka locally

This is a docker-compose file with some events  autogenerated by the library [fake-events](https://github.com/andresionek91/fake-web-events).

## Requirements

- docker    
- docker-compose
- python 3

## Setting up

First do:

    pip install -r requests fake-events

Assure that the docker service is running, go to ETL/streaming/infra and run:

```bash
    docker-compose build 
    docker-compose up -d
```

This will create 5 containers:
- 2 Kafka Brokers
- 2 Zoopeker workers
- Queue api (Insert data int kafka easily)

After this using *docker ps* you should se something like:
```
CONTAINER ID   IMAGE                              COMMAND                  CREATED          STATUS          PORTS                                                             NAMES
6372ac49cf00   infra_api                          "uvicorn queue_api:a…"   7 minutes ago    Up 7 minutes    0.0.0.0:80->80/tcp, :::80->80/tcp                                 infra_api_1
25ed1d8f1715   confluentinc/cp-kafka:latest       "/etc/confluent/dock…"   11 minutes ago   Up 11 minutes   9092/tcp, 0.0.0.0:29092->29092/tcp, :::29092->29092/tcp           infra_kafka-1_1
b2ef51dfa257   confluentinc/cp-kafka:latest       "/etc/confluent/dock…"   11 minutes ago   Up 11 minutes   9092/tcp, 0.0.0.0:39092->39092/tcp, :::39092->39092/tcp           infra_kafka-2_1
3b61c3adb88d   confluentinc/cp-zookeeper:latest   "/etc/confluent/dock…"   11 minutes ago   Up 11 minutes   2888/tcp, 3888/tcp, 0.0.0.0:32181->2181/tcp, :::32181->2181/tcp   infra_zookeeper-2_1
eab199d09a86   confluentinc/cp-zookeeper:latest   "/etc/confluent/dock…"   11 minutes ago   Up 11 minutes   2888/tcp, 3888/tcp, 0.0.0.0:22181->2181/tcp, :::22181->2181/tcp   infra_zookeeper-1_1
```

## Running 

Now we need to create some events, using the fake-events just run:

    python ETL/streaming/infra/gen_events.py